{"ast":null,"code":"import { useEffect, useState, useCallback } from \"react\";\nimport { isProduction } from \"@rpldy/shared\";\nimport { UPLOAD_OPTIONS_COMP } from \"./consts\";\nimport useUploadyContext from \"./useUploadyContext\";\n\nconst useEventEffect = (event, fn) => {\n  const context = useUploadyContext();\n  const {\n    on,\n    off\n  } = context;\n  useEffect(() => {\n    on(event, fn);\n    return () => {\n      off(event, fn);\n    };\n  }, [event, fn, on, off]);\n};\n\nconst generateUploaderEventHookWithState = (event, stateCalculator) => (fn, id) => {\n  const [eventState, setEventState] = useState(null);\n  const eventCallback = useCallback(function (eventObj) {\n    if (!id || eventObj.id === id) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      setEventState(stateCalculator(eventObj, ...args));\n\n      if (fn) {\n        fn(eventObj, ...args);\n      }\n    }\n  }, [fn, id]);\n  useEventEffect(event, eventCallback);\n  return eventState;\n};\n\nconst generateUploaderEventHook = function (event) {\n  let canScope = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return (fn, id) => {\n    const eventCallback = useCallback(function (eventObj) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      return fn && (!canScope || !id || eventObj.id === id) ? fn(eventObj, ...args) : undefined;\n    }, [fn, id]);\n    useEventEffect(event, eventCallback);\n  };\n};\n\nconst logWarning = (condition, msg) => {\n  if (!isProduction() && !condition) {\n    // eslint-disable-next-line no-console\n    console.warn(msg);\n  }\n};\n\nconst markAsUploadOptionsComponent = Component => {\n  Component[UPLOAD_OPTIONS_COMP] = true;\n};\n\nconst getIsUploadOptionsComponent = Component => {\n  var _Component$target, _Component$render;\n\n  return Component[UPLOAD_OPTIONS_COMP] === true || ((_Component$target = Component.target) === null || _Component$target === void 0 ? void 0 : _Component$target[UPLOAD_OPTIONS_COMP]) === true || ((_Component$render = Component.render) === null || _Component$render === void 0 ? void 0 : _Component$render[UPLOAD_OPTIONS_COMP]) === true;\n};\n\nexport { generateUploaderEventHook, generateUploaderEventHookWithState, logWarning, markAsUploadOptionsComponent, getIsUploadOptionsComponent };","map":{"version":3,"sources":["/Users/bob/codes/mobility-blockchain-frontend/node_modules/@rpldy/shared-ui/lib/esm/utils.js"],"names":["useEffect","useState","useCallback","isProduction","UPLOAD_OPTIONS_COMP","useUploadyContext","useEventEffect","event","fn","context","on","off","generateUploaderEventHookWithState","stateCalculator","id","eventState","setEventState","eventCallback","eventObj","args","generateUploaderEventHook","canScope","undefined","logWarning","condition","msg","console","warn","markAsUploadOptionsComponent","Component","getIsUploadOptionsComponent","_Component$target","_Component$render","target","render"],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\nimport { isProduction } from \"@rpldy/shared\";\nimport { UPLOAD_OPTIONS_COMP } from \"./consts\";\nimport useUploadyContext from \"./useUploadyContext\";\n\nconst useEventEffect = (event, fn) => {\n  const context = useUploadyContext();\n  const {\n    on,\n    off\n  } = context;\n  useEffect(() => {\n    on(event, fn);\n    return () => {\n      off(event, fn);\n    };\n  }, [event, fn, on, off]);\n};\n\nconst generateUploaderEventHookWithState = (event, stateCalculator) => (fn, id) => {\n  const [eventState, setEventState] = useState(null);\n  const eventCallback = useCallback((eventObj, ...args) => {\n    if (!id || eventObj.id === id) {\n      setEventState(stateCalculator(eventObj, ...args));\n\n      if (fn) {\n        fn(eventObj, ...args);\n      }\n    }\n  }, [fn, id]);\n  useEventEffect(event, eventCallback);\n  return eventState;\n};\n\nconst generateUploaderEventHook = (event, canScope = true) => (fn, id) => {\n  const eventCallback = useCallback((eventObj, ...args) => {\n    return fn && (!canScope || !id || eventObj.id === id) ? fn(eventObj, ...args) : undefined;\n  }, [fn, id]);\n  useEventEffect(event, eventCallback);\n};\n\nconst logWarning = (condition, msg) => {\n  if (!isProduction() && !condition) {\n    // eslint-disable-next-line no-console\n    console.warn(msg);\n  }\n};\n\nconst markAsUploadOptionsComponent = Component => {\n  Component[UPLOAD_OPTIONS_COMP] = true;\n};\n\nconst getIsUploadOptionsComponent = Component => {\n  var _Component$target, _Component$render;\n\n  return Component[UPLOAD_OPTIONS_COMP] === true || ((_Component$target = Component.target) === null || _Component$target === void 0 ? void 0 : _Component$target[UPLOAD_OPTIONS_COMP]) === true || ((_Component$render = Component.render) === null || _Component$render === void 0 ? void 0 : _Component$render[UPLOAD_OPTIONS_COMP]) === true;\n};\n\nexport { generateUploaderEventHook, generateUploaderEventHookWithState, logWarning, markAsUploadOptionsComponent, getIsUploadOptionsComponent };"]},"metadata":{},"sourceType":"module"}