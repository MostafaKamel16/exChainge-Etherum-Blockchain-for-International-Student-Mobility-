{"ast":null,"code":"export const readNonce = publicAddress => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/nonce/${publicAddress.toLowerCase()}`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const userLogin = (publicAddress, sign) => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/login`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      sign: sign,\n      metamask_address: publicAddress\n    })\n  }).then(response => {\n    const resp = response.json();\n    return resp;\n  }).catch(err => console.log(err));\n};\nexport const registerUser = (publicAddress, username, serverAddress) => {\n  const data = {\n    'username': username,\n    'metamask_address': publicAddress,\n    'nameServer_address': serverAddress\n  };\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/create`, {\n    'method': \"POST\",\n    'headers': {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    'body': JSON.stringify(data)\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const signout = () => {\n  if (typeof window !== 'undefined') {\n    const {\n      token\n    } = JSON.parse(localStorage.getItem('jwt'));\n    window.localStorage.clear();\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/signout`, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(response => {\n      console.log('signout', response);\n    }).catch(err => console.log(err));\n  }\n};\nexport const readUser = (publicAddress, token) => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/${publicAddress}`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n}; //To read all received trancritps(the ones that need to be verified)\n\nexport const readExternalTranscripts = async token => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/transcript/verify/list`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n}; //To read all recieved trancritps(the ones that need to be verified)\n\nexport const readInternalTranscriptsbyId = async (token, id) => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/transcript/${id}`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n}; //To update one of the received trancritps(the one that need to be verified)\n\nexport const updateTranscriptStatus = async (id, status, token) => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/transcript/setUploaded`, {\n    method: \"PATCH\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      '_id': id,\n      'status': status\n    })\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n}; //To read a list of all internal transcripts(ones that need to be uploded/sent)\n\nexport const readInternalTranscripts = async token => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/transcript/internalTranscripts/List`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const storeInternalTranscripts = async files => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + '/transcript/internalTranscripts', {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(files)\n  }).then(response => {\n    console.log(response);\n  });\n}; // to read partner University \n\nexport const readPartnerUni = async token => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/partners/get`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    return response.json();\n  }).then(json => {\n    console.log(json.Unis);\n    return json.Unis;\n  }).catch(err => console.log(err));\n};\nexport const readPartnerUniList = async token => {\n  return fetch(`${process.env.REACT_APP_LOCAL_SERVER_ADDRESS}/partners/get`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(async response => {\n    const data = await response.json();\n    let formattedData = [];\n\n    for (let i = 0; i < data.Unis.length; i++) {\n      formattedData.push([data.Unis[i].partner_university]);\n    }\n\n    return formattedData;\n  }).catch(err => console.log(err));\n}; // to set and update the partner uni list \n\nexport const updatePartnerUnis = (data, token) => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/partners/add`, {\n    method: \"PUT\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      partnerUnis: data\n    })\n  }).then(async response => {\n    // localStorage.setItem(\"partnerUniList\",response.json())\n    // return response.json();\n    const data = await readPartnerUni(token);\n    await localStorage.setItem('partnerUnis', JSON.stringify(data.Unis));\n    return data;\n  }).catch(err => console.log(err));\n}; // to read stats on transcript count for a partner University \n\nexport const getPartnerStats = async (uni, token) => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/partners/getStats/${uni}`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n}; //sending transcripts to 2nd uni for now sending to ourself\n\nexport const sendTranscripts = async files => {\n  return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + '/transcript/create', {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(files)\n  }).then(response => {\n    console.log(response.data);\n  });\n};\nexport const readBatchedByIndex = async (index, uni) => {\n  return fetch(`${process.env.REACT_APP_LOCAL_SERVER_ADDRESS}/transcript/index/${index}/${uni}`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const readBatchedInternalTranscripts = async (token, uni) => {\n  return fetch(`${process.env.REACT_APP_LOCAL_SERVER_ADDRESS}/transcript/internalTranscripts/${uni}`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const setTranscriptsToNotBatched = async (token, uni) => {\n  return fetch(`${process.env.REACT_APP_LOCAL_SERVER_ADDRESS}/transcript/internalTranscripts/update/${uni}`, {\n    method: \"PATCH\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => {// return response.json();\n  }).catch(err => console.log(err));\n};","map":{"version":3,"sources":["/Users/bob/codes/mobility-blockchain-frontend/src/services/api.js"],"names":["readNonce","publicAddress","fetch","process","env","REACT_APP_LOCAL_SERVER_ADDRESS","toLowerCase","method","headers","Accept","then","response","json","catch","err","console","log","userLogin","sign","body","JSON","stringify","metamask_address","resp","registerUser","username","serverAddress","data","signout","window","token","parse","localStorage","getItem","clear","readUser","Authorization","readExternalTranscripts","readInternalTranscriptsbyId","id","updateTranscriptStatus","status","readInternalTranscripts","storeInternalTranscripts","files","readPartnerUni","Unis","readPartnerUniList","formattedData","i","length","push","partner_university","updatePartnerUnis","partnerUnis","setItem","getPartnerStats","uni","sendTranscripts","readBatchedByIndex","index","readBatchedInternalTranscripts","setTranscriptsToNotBatched"],"mappings":"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","sourcesContent":["export const readNonce = (publicAddress) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/nonce/${publicAddress.toLowerCase()}`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .catch((err) => console.log(err));\n};\n\nexport const userLogin = (publicAddress, sign) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/login`, {\n        method: \"POST\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n            sign: sign,\n            metamask_address: publicAddress,\n        }),\n    })\n        .then((response) => {\n            const resp = response.json();\n            return resp;\n        })\n        .catch((err) => console.log(err));\n};\n\nexport const registerUser = (publicAddress, username, serverAddress) => {\n\n    const data = {\n        'username': username,\n        'metamask_address': publicAddress,\n        'nameServer_address': serverAddress\n    }\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/create`, {\n        'method': \"POST\",\n        'headers': {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        'body': JSON.stringify(data),\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .catch((err) => console.log(err));\n};\n\nexport const signout = () => {\n    if (typeof window !== 'undefined') {\n\n        const { token } = JSON.parse(localStorage.getItem('jwt'));\n        window.localStorage.clear();\n        return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS  + `/user/signout`, {\n          method: 'GET',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token,\n        },\n      })\n          .then((response) => {\n            console.log('signout', response);\n\n            })\n            .catch((err) => console.log(err));\n    }\n};\n\nexport const readUser = (publicAddress,token) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/user/${publicAddress}`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .catch((err) => console.log(err));\n};\n\n//To read all received trancritps(the ones that need to be verified)\nexport const readExternalTranscripts = async (token) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/transcript/verify/list`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .catch((err) => console.log(err));\n};\n\n//To read all recieved trancritps(the ones that need to be verified)\nexport const readInternalTranscriptsbyId = async (token,id) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS  + `/transcript/${id}`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .catch((err) => console.log(err));\n};\n\n//To update one of the received trancritps(the one that need to be verified)\nexport const updateTranscriptStatus = async (id, status,token) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/transcript/setUploaded`, {\n        method: \"PATCH\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n            '_id': id,\n            'status': status\n        })\n    }).then((response) => {\n            return response.json();\n        })\n        .catch((err) => console.log(err));\n};\n\n\n//To read a list of all internal transcripts(ones that need to be uploded/sent)\nexport const readInternalTranscripts = async (token) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + `/transcript/internalTranscripts/List`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .catch((err) => console.log(err));\n};\n\nexport const storeInternalTranscripts = async (files) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + '/transcript/internalTranscripts', {\n        method: \"POST\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(files),\n    }).then((response) => {\n        console.log(response);\n    });\n}\n\n// to read partner University \nexport const readPartnerUni = async (token) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS  + `/partners/get`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .then((json) => {\n            console.log(json.Unis)\n            return json.Unis;\n        })\n        .catch((err) => console.log(err));\n};\n\nexport const readPartnerUniList = async (token) => {\n    return fetch(`${process.env.REACT_APP_LOCAL_SERVER_ADDRESS }/partners/get`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n    })\n        .then(async(response) => {\n            const data = await response.json()\n            let formattedData = [];\n            for (let i = 0; i < data.Unis.length; i++) {\n                formattedData.push([data.Unis[i].partner_university])\n            }        \n            return formattedData;\n        })\n        .catch((err) => console.log(err));\n};\n\n// to set and update the partner uni list \nexport const updatePartnerUnis = (data, token) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS  + `/partners/add`, {\n        method: \"PUT\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n            partnerUnis: data\n        }),\n    })\n        .then(async(response) => {\n            // localStorage.setItem(\"partnerUniList\",response.json())\n            // return response.json();\n            const data = await readPartnerUni(token);\n            await localStorage.setItem('partnerUnis', JSON.stringify(data.Unis));\n            return data;\n        })\n        .catch((err) => console.log(err));\n};\n\n// to read stats on transcript count for a partner University \nexport const getPartnerStats = async (uni,token) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS  + `/partners/getStats/${uni}`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n    })\n        .then((response) => {\n            return response.json();\n        })\n        .catch((err) => console.log(err));\n};\n\n\n//sending transcripts to 2nd uni for now sending to ourself\nexport const sendTranscripts = async (files) => {\n    return fetch(process.env.REACT_APP_LOCAL_SERVER_ADDRESS + '/transcript/create', {\n        method: \"POST\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(files),\n    }).then((response) => {\n        console.log(response.data);\n    });\n}\n\n\nexport const readBatchedByIndex = async (index,uni) => {\n    return fetch(`${process.env.REACT_APP_LOCAL_SERVER_ADDRESS }/transcript/index/${index}/${uni}`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n    })\n    .then((response) => {\n        return response.json();\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const readBatchedInternalTranscripts = async (token, uni) => {\n    return fetch(`${process.env.REACT_APP_LOCAL_SERVER_ADDRESS }/transcript/internalTranscripts/${uni}`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n    })\n    .then((response) => {\n        return response.json();\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const setTranscriptsToNotBatched = async (token, uni) => {\n    return fetch(`${process.env.REACT_APP_LOCAL_SERVER_ADDRESS }/transcript/internalTranscripts/update/${uni}`, {\n        method: \"PATCH\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n    })\n    .then((response) => {\n        // return response.json();\n    })\n    .catch((err) => console.log(err));\n};"]},"metadata":{},"sourceType":"module"}