{"ast":null,"code":"var _jsxFileName = \"/Users/bob/codes/mobility-blockchain-frontend/src/views/Verify.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport AppNavBar from '../component/AppNavBar';\nimport Web3 from 'web3';\nimport Grid from \"@material-ui/core/Grid\";\nimport { Paper, Button, TextField, Typography } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst helloWorldAddress = '0x18D9752E1b4F2AB987F3D93CF3084c83A195D4b7';\nconst accountStoreAddress = '0x055e01B90Ac0197144c55B75382A8bf293971176';\nconst hashStoreAddress = '0xe0120F023289CA6EaBAD6541BA00f8fb12B77418';\nconst host = 'http://192.168.0.105:8545';\n\nconst helloWorldAbi = require(\"../contracts-abi/helloWorld.json\");\n\nconst accountStoreAbi = require(\"../abi/AccountStore.json\");\n\nconst hashStoreAbi = require(\"../abi/HashStore.json\");\n/**\n * For transcript verification .\n * @param {props} props\n */\n\n\nfunction Verify(props) {\n  _s();\n\n  const [fakeTranscript, setTranscript] = React.useState(\"\");\n\n  const onChange = e => {\n    setTranscript(e.target.value);\n    setStatus(\"Not started\");\n  };\n\n  const [Status, setStatus] = React.useState(\"Not started\");\n\n  const onChangeStatus = val => {\n    setStatus(val);\n  };\n\n  const transcriptStored = {\n    studentName: \"test_student\",\n    subject: {\n      name: \"test_subject\",\n      grade: 2\n    }\n  };\n\n  const getContractInstance = async (host, deployedContractAbi, deployedContractAddress, walletAddress) => {\n    const web3 = new Web3(host);\n\n    try {\n      const password = \"123456\";\n      await web3.eth.personal.unlockAccount(walletAddress, password, 0);\n    } catch (e) {\n      console.log(e);\n    }\n\n    const contractInstance = new web3.eth.Contract(deployedContractAbi, deployedContractAddress.toLowerCase());\n    return contractInstance;\n  };\n\n  const setupContractCall = async () => {\n    let web3 = undefined;\n\n    if (!window.ethereum) {\n      window.alert(\"Please install MetaMask first.\");\n      return;\n    }\n\n    if (!web3) {\n      try {\n        // Request account access if needed\n        await window.ethereum.enable(); // We don't know window.web3 version, so we use our own instance of Web3\n        // with the injected provider given by MetaMask\n\n        web3 = new Web3(window.ethereum);\n      } catch (error) {\n        window.alert(\"You need to allow MetaMask.\");\n        return;\n      }\n    }\n\n    const coinbase = await web3.eth.getCoinbase();\n\n    if (!coinbase) {\n      window.alert(\"Please activate MetaMask first.\");\n      return;\n    }\n\n    const id = \"0x632989cf2526aefa95c4d6c3cab5710f711ed827\";\n    const publicAddress = id.toLowerCase();\n    const balance = await web3.eth.getBalance(publicAddress);\n    console.log(\"Fetched address : \", publicAddress, \", Balance : \", balance);\n    return publicAddress;\n  };\n\n  const verifyTranscript = async () => {\n    const Dummytranscript = {\n      studentName: \"test_student\",\n      subject: {\n        name: \"test_subject\",\n        grade: 2\n      }\n    };\n    onChangeStatus(\"Processing of transcript underway\");\n    console.log(\"The click pre call flag\");\n    let walletAddress = await setupContractCall();\n    console.log(\"call a contract :\");\n    const contractInstance = await getContractInstance(host, JSON.parse(JSON.stringify(hashStoreAbi)), hashStoreAddress, walletAddress);\n    console.log(contractInstance);\n    console.log(fakeTranscript, Dummytranscript);\n    /*var Event = contractInstance.validity({_from: walletAddress});\n    Event.watch(function(err, result) {\n        if (err) {\n          console.log(err)\n          return;\n        }\n        console.log(result.args.isValid)\n        // check that result.args._from is web3.eth.coinbase then\n        // display result.args._value in the UI and call    \n        Event.stopWatching()\n      })*/\n\n    const res = await contractInstance.methods.validate(JSON.parse(fakeTranscript), 0).send({\n      from: walletAddress\n    });\n    console.log(\"Obtained value at deployed contract is: \");\n    if (res.events['validity']['returnValues']['isValid']) onChangeStatus(\"Processing of transcript Successful!!!\");else onChangeStatus(\"Processing of transcript Failed :(\");\n    console.log(res.events['validity']['returnValues']['isValid']);\n    console.log(\"After click call flag\");\n  };\n\n  const FetchData = async () => {\n    let web3 = undefined;\n\n    if (!window.ethereum) {\n      window.alert('Please install MetaMask first.');\n      return;\n    }\n\n    if (!web3) {\n      try {\n        // Request account access if needed\n        await window.ethereum.enable(); // We don't know window.web3 version, so we use our own instance of Web3\n        // with the injected provider given by MetaMask\n\n        web3 = new Web3(window.ethereum);\n      } catch (error) {\n        window.alert('You need to allow MetaMask.');\n        return;\n      }\n    }\n\n    const coinbase = await web3.eth.getCoinbase();\n\n    if (!coinbase) {\n      window.alert('Please activate MetaMask first.');\n      return;\n    }\n\n    const publicAddress = coinbase.toLowerCase();\n    console.log(publicAddress);\n    let contract = new web3.eth.Contract(hashStoreAbi, \"0x2e1AfeAEE35302aBC85D4866f72675b62A916B59\");\n    console.log(await contract.methods.getGreeting().call()); //await contract.methods.setGreeting(\"TEST CHANGE!\").call()\n    //console.log(await contract.methods.getGreeting().call())\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"container\", {\n    children: [/*#__PURE__*/_jsxDEV(AppNavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      id: \"iconsPosition\",\n      container: true,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        xs: 1,\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Transcript\",\n          fullWidth: true,\n          value: fakeTranscript,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        xs: 1,\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          component: \"span\",\n          onClick: verifyTranscript,\n          children: \"Verify Transcript\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        xs: 1,\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Stored Tramscript : \", JSON.stringify(transcriptStored)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        xs: 1,\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Transcript Verification Status : \", Status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Verify, \"GEDk8mWXS5aWwm+9BnYQC0sIdUU=\");\n\n_c = Verify;\nexport default connect()(withRouter(Verify));\n\nvar _c;\n\n$RefreshReg$(_c, \"Verify\");","map":{"version":3,"sources":["/Users/bob/codes/mobility-blockchain-frontend/src/views/Verify.js"],"names":["React","withRouter","connect","AppNavBar","Web3","Grid","Paper","Button","TextField","Typography","helloWorldAddress","accountStoreAddress","hashStoreAddress","host","helloWorldAbi","require","accountStoreAbi","hashStoreAbi","Verify","props","fakeTranscript","setTranscript","useState","onChange","e","target","value","setStatus","Status","onChangeStatus","val","transcriptStored","studentName","subject","name","grade","getContractInstance","deployedContractAbi","deployedContractAddress","walletAddress","web3","password","eth","personal","unlockAccount","console","log","contractInstance","Contract","toLowerCase","setupContractCall","undefined","window","ethereum","alert","enable","error","coinbase","getCoinbase","id","publicAddress","balance","getBalance","verifyTranscript","Dummytranscript","JSON","parse","stringify","res","methods","validate","send","from","events","FetchData","contract","getGreeting","call"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {withRouter} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport AppNavBar from  '../component/AppNavBar';\nimport Web3 from 'web3';\nimport Grid from \"@material-ui/core/Grid\";\nimport { Paper, Button, TextField, Typography } from \"@material-ui/core\";\n\nconst helloWorldAddress = '0x18D9752E1b4F2AB987F3D93CF3084c83A195D4b7';\nconst accountStoreAddress = '0x055e01B90Ac0197144c55B75382A8bf293971176';\nconst hashStoreAddress = '0xe0120F023289CA6EaBAD6541BA00f8fb12B77418';\nconst host = 'http://192.168.0.105:8545'\nconst helloWorldAbi = require(\"../contracts-abi/helloWorld.json\");\nconst accountStoreAbi = require(\"../abi/AccountStore.json\");\nconst hashStoreAbi = require(\"../abi/HashStore.json\");\n/**\n * For transcript verification .\n * @param {props} props\n */\n\n function Verify(props) {\n    const [fakeTranscript, setTranscript] = React.useState(\"\");\n    const onChange = (e) => {\n        setTranscript(e.target.value);\n        setStatus(\"Not started\")\n    };\n    const [Status, setStatus] = React.useState(\"Not started\");\n    const onChangeStatus = (val) => {\n        setStatus(val);\n    };\n    const transcriptStored = {\n        studentName: \"test_student\",\n        subject: {\n            name: \"test_subject\",\n            grade: 2,\n        }\n    };\n\n    const getContractInstance= async(\n        host,\n        deployedContractAbi,\n        deployedContractAddress,\n        walletAddress\n    ) =>{\n        const web3 = new Web3(host);\n        try {\n            const password = \"123456\";\n            await web3.eth.personal.unlockAccount(walletAddress, password, 0);\n        } catch (e) {\n            console.log(e);\n        }\n        \n        const contractInstance = new web3.eth.Contract(\n            deployedContractAbi,\n            deployedContractAddress.toLowerCase()\n        );\n        return contractInstance;\n    };\n\n    const setupContractCall = async () => {\n        let web3 = undefined;\n\n        if (!window.ethereum) {\n            window.alert(\"Please install MetaMask first.\");\n            return;\n        }\n        if (!web3) {\n            try {\n                // Request account access if needed\n                await window.ethereum.enable();\n\n                // We don't know window.web3 version, so we use our own instance of Web3\n                // with the injected provider given by MetaMask\n                web3 = new Web3(window.ethereum);\n            } catch (error) {\n                window.alert(\"You need to allow MetaMask.\");\n                return;\n            }\n        }\n        const coinbase = await web3.eth.getCoinbase();\n        if (!coinbase) {\n            window.alert(\"Please activate MetaMask first.\");\n            return;\n        }\n        const id = \"0x632989cf2526aefa95c4d6c3cab5710f711ed827\";\n        const publicAddress = id.toLowerCase();\n        const balance = await web3.eth.getBalance(publicAddress);\n        console.log(\n            \"Fetched address : \",\n            publicAddress,\n            \", Balance : \",\n            balance\n        );\n        return publicAddress\n    }\n\n\n    const verifyTranscript = async() => {\n        const Dummytranscript = {\n            studentName: \"test_student\",\n            subject: {\n                name: \"test_subject\",\n                grade: 2,\n            }\n        };\n        onChangeStatus(\"Processing of transcript underway\")\n        console.log(\"The click pre call flag\");\n        let walletAddress=await setupContractCall();\n        console.log(\"call a contract :\");\n        const contractInstance = await getContractInstance(\n            host,\n            JSON.parse(JSON.stringify(hashStoreAbi)),\n            hashStoreAddress,\n            walletAddress\n        );\n        console.log(contractInstance);\n        console.log(fakeTranscript,Dummytranscript)\n        /*var Event = contractInstance.validity({_from: walletAddress});\n        Event.watch(function(err, result) {\n            if (err) {\n              console.log(err)\n              return;\n            }\n            console.log(result.args.isValid)\n            // check that result.args._from is web3.eth.coinbase then\n            // display result.args._value in the UI and call    \n            Event.stopWatching()\n          })*/\n        const res = await contractInstance.methods.validate(JSON.parse(fakeTranscript),0).send({ from: walletAddress });\n        console.log(\"Obtained value at deployed contract is: \");\n        if (res.events['validity']['returnValues']['isValid'])\n            onChangeStatus(\"Processing of transcript Successful!!!\")\n        else\n            onChangeStatus(\"Processing of transcript Failed :(\")\n        console.log(res.events['validity']['returnValues']['isValid'])\n        console.log(\"After click call flag\");\n    }\n\n    const FetchData = async () => {\n        let web3 = undefined;\n        if (!(window).ethereum) {\n\t\t\twindow.alert('Please install MetaMask first.');\n\t\t\treturn;\n\t\t}\n    \n\n\t\tif (!web3) {\n\t\t\ttry {\n\t\t\t\t// Request account access if needed\n\t\t\t\tawait (window).ethereum.enable();\n\n\t\t\t\t// We don't know window.web3 version, so we use our own instance of Web3\n\t\t\t\t// with the injected provider given by MetaMask\n\t\t\t\tweb3 = new Web3((window).ethereum);\n\t\t\t} catch (error) {\n\t\t\t\twindow.alert('You need to allow MetaMask.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n        \n        const coinbase = await web3.eth.getCoinbase();\n\t\tif (!coinbase) {\n\t\t\twindow.alert('Please activate MetaMask first.');\n\t\t\treturn;\n\t\t}\n\n        const publicAddress = coinbase.toLowerCase();\n        console.log(publicAddress)\n        let contract = new web3.eth.Contract(hashStoreAbi,\"0x2e1AfeAEE35302aBC85D4866f72675b62A916B59\");\n        console.log(await contract.methods.getGreeting().call());\n        //await contract.methods.setGreeting(\"TEST CHANGE!\").call()\n        //console.log(await contract.methods.getGreeting().call())\n        \n    };\n\n    return(\n    <container>\n        <AppNavBar/> \n            <Grid id=\"iconsPosition\" container>\n            <Grid xs={1}> </Grid>\n\n            <div >\n                    <TextField\n                        label=\"Transcript\"\n                        fullWidth\n                        value={fakeTranscript}\n                        onChange={onChange}\n                    />\n                </div>\n            <Grid xs={1}> </Grid>\n            \n            <div >  \n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    component=\"span\"\n                    onClick= {verifyTranscript}\n                    >Verify Transcript\n                </Button>\n            </div>\n            <Grid xs={1}> </Grid>\n\n            <div>\n                <h3>Stored Tramscript : {JSON.stringify(transcriptStored)}</h3>\n            </div>\n            <Grid xs={1}> </Grid>\n            <div>\n                <h3>Transcript Verification Status : {Status}</h3>\n            </div>\n            </Grid>\n    </container>\n    \n  );\n }\n\nexport default connect()(withRouter(Verify));"]},"metadata":{},"sourceType":"module"}